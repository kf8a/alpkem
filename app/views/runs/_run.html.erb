<% if run.complete? %>
<tr class="hover:bg-gray-50 transition-colors">
<% else %>
<tr class="bg-red-100 hover:bg-red-200 transition-colors">
<% end %>
  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
    <%= link_to run.id, run_path(run), class: "text-blue-600 hover:text-blue-800 hover:underline" %>
  </td>
  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
    <%= run.run_date %>
  </td>
  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
    <%= run.sample_date %>
  </td>
  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
    <%= run.sample_date_range %>
  </td>
  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
    <%= run.sample_type_name %>
  </td>
  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
      <%= run.approved_samples %>/<%= run.samples.size %> samples
    </span>
  </td>
  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
    <div class="flex space-x-2">
      <%= link_to "QC", qc_run_path(run), class: "text-blue-600 hover:text-blue-800 hover:underline" %>
      <%= link_to "Download", run_path(run, :format=>:csv), class: "text-green-600 hover:text-green-800 hover:underline" %>
      <%= link_to "Edit", edit_run_path(run), class: "text-yellow-600 hover:text-yellow-800 hover:underline" %>
      <%= form_with url: run_path(run), method: :delete, data: { turbo_confirm: 'Are you sure?' }, class: "inline" do |f| %>
        <%= f.submit "Delete", class: "text-red-600 hover:text-red-800 hover:underline bg-transparent border-none p-0 cursor-pointer" %>
      <% end %>
    </div>
  </td>
  <td class="px-6 py-4 text-sm text-gray-900 max-w-xs truncate">
    <%= run.comment %>
  </td>
  <td class="px-6 py-4 text-sm text-gray-900 max-w-xs truncate">
    <%= run.data_sources.collect {|x| File.basename(x.data.to_s)}.join(', ') %>
  </td>
</tr>
